(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["62719"],{730525:function(e,t,i){i.d(t,{Z:()=>ej});var s=i(667294),n=i(581722),o=i(616550),a=i(883119),r=i(576140);let l={inject:()=>{var e=window,t=document,i="addEventListener",s="load";function n(){let e=t.createElement("script");e.async=!0,e.src="//radar.cedexis.com/1/14290/radar.js",t.body?.appendChild(e)}(function(){for(let e=[/\bMSIE (5|6)/i],t=e.length;t--;)if(e[t].test(navigator.userAgent))return!1;return!0})()&&("complete"!==t.readyState?(i=e[i])?i(s,n,!1):(i=e.attachEvent)&&i("on"+s,n):n())}};var d=i(799016),c=i(811203),h=i(822464),u=i(667314),p=i(374114),m=i(111330),_=i(891542),f=i(410156),g=i(355940),b=i(318215),w=i(439068),y=i(469167),v=i(217330),x=i(475498),P=i(93966),A=i(390843),S=i(525839),I=i(369416),E=i(302148),j=i(806438),C=i(226967),T=i(966872),Z=i(81497),k=i(274320),z=i(993279),B=i(355363),L=i(15667),R=i(886981),H=i(821806),F=i(753143),U=i(591226),D=i(159527),N=i(123998),W=i(572227),M=i(875723),O=i(87853),q=i(378888),Y=i(341742),G=i(458963),$=i(535701),K=i(645435),J=i(762525),Q=i(230543),V=i(45059),X=i(542963),ee=i(314011),et=i(845421),ei=i(966838),es=i(373950),en=i(169053),eo=i(603316),ea=i(78762),er=i(785893);function el(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:s+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ed=(0,ea.Z)(()=>i.e("43705").then(i.bind(i,397702)),void 0,e=>397702,"app-common-react-components-FeedsAndFollowing-Homefeed-PinterestPicksFeed"),ec=(0,ea.Z)(()=>i.e("63815").then(i.bind(i,158317)),void 0,e=>158317,"MoreIdeasTabsNavCommon"),eh=(0,ea.Z)(()=>i.e("95943").then(i.bind(i,233256)),{ssr:!1},e=>233256,void 0),eu=(0,ea.Z)(()=>Promise.all([i.e("65623"),i.e("16597")]).then(i.bind(i,430163)),{ssr:!1},e=>430163,void 0),ep=(0,s.lazy)(()=>i.e("29078").then(i.bind(i,30342))),em=(0,s.lazy)(()=>i.e("76753").then(i.bind(i,373734))),e_=(0,s.lazy)(()=>i.e("84065").then(i.bind(i,830718))),ef=(0,ea.Z)(()=>i.e("29960").then(i.bind(i,787211)),void 0,e=>787211,"app-www-EUPrompt-EUPromptModal"),eg=(0,ea.Z)(()=>i.e("94833").then(i.bind(i,736173)),void 0,e=>736173,"app-packages-StructuredFeed-Feed-StructuredFeed"),eb=(0,ea.Z)(()=>Promise.all([i.e("17442"),i.e("57907")]).then(i.bind(i,712559)),void 0,e=>712559,"app-common-react-components-save-board-BoardMoreIdeasTabContentResourceWrapper"),ew=(0,s.lazy)(()=>i.e("51437").then(i.bind(i,947214))),ey=(0,ea.Z)(()=>i.e("24561").then(i.bind(i,725191)),void 0,e=>725191,"app-www-discover-Bubbles-BubblesGridRep"),ev=(0,ea.Z)(()=>Promise.all([i.e("56184"),i.e("42008")]).then(i.bind(i,957378)),{fallback:(0,er.jsx)(a.xu,{height:1})},e=>957378,"app-common-react-components-SummaryCard-Story-StoryCard"),ex=(0,s.createRef)(),eP=e=>{let t=document.createElement("link"),i=document.querySelector("link[rel='icon']")||document.getElementById("dynamic-favicon");if(t.id="dynamic-favicon",t.rel="shortcut icon",t.type="image/x-icon",t.href=e,document.head){if(i){if(i instanceof HTMLLinkElement&&i.href===e)return;document.head.removeChild(i)}document.head.appendChild(t)}},eA=(e,t)=>(e||[]).slice(0,t).map(e=>e.id),eS=(e,t)=>JSON.stringify(e)===JSON.stringify(t);class eI extends s.PureComponent{constructor(...e){super(...e),el(this,"state",{hasScrolled:!1,hideTabs:!1,refreshReason:null,isRefreshing:!1,showYipModal:!1}),el(this,"refreshData",(e="unknown")=>{let{refreshData:t}=this.props;this.setState({refreshReason:e,isRefreshing:!0},()=>{t()})}),el(this,"handleScroll",(0,D.Z)(()=>{let{hasScrolled:e}=this.state,{experience:t,lastScrollYRef:i}=this.props,s=window.scrollY,n=i.current;s<50?this.setState({hideTabs:!1}):Math.abs(s-n)>20&&(requestAnimationFrame(()=>{n>s?this.setState({hideTabs:!1}):n<s&&this.setState({hideTabs:!0})}),i.current=s),t&&502535===t.experience_id&&!e&&this.setState({hasScrolled:!0})},10)),el(this,"onWindowFocus",()=>{this.windowBlurStart>-1&&Date.now()-this.windowBlurStart>6e5&&this.refreshData("MORE_THAN_10_MINUTES"),this.windowBlurStart=-1,this.clearFaviconNotification()}),el(this,"onWindowBlur",()=>{this.windowBlurStart=Date.now(),this.prepareForFaviconUpdate()}),el(this,"onInstallPrompt",e=>{this.installPromptEvent=e,this.setState({pwaUpsellBannerEligibility:this.getpwaUpsellBannerEligibility()})}),el(this,"clearFaviconNotification",()=>{this.faviconUpdateTimeout&&(clearTimeout(this.faviconUpdateTimeout),this.faviconUpdateTimeout=null),eP("https://s.pinimg.com/webapp/favicon_48x48-7470a30d.png")}),el(this,"prepareForFaviconUpdate",()=>{this.faviconUpdateTimeout=setTimeout(()=>{let e=F.ZP.getItem(m.jz);(!e||new Date().getTime()-e>=f.F4)&&(eP("https://s.pinimg.com/webapp/favicon-notification_48x48-caeeb45a.png"),F.ZP.setItem(m.jz,new Date().getTime()))},6e5)}),el(this,"windowBlurStart",-1),el(this,"faviconUpdateTimeout",null),el(this,"loadItems",()=>{let{dataIsFetching:e,feedLimit:t,fetchMoreData:i,homefeedData:s}=this.props,n=s||[];if(t&&n.length>t){this.props.setFeedLoading&&this.props.setFeedLoading(!1);return}!e&&n.length>0&&i()}),el(this,"installPromptEvent",null),el(this,"getpwaUpsellBannerEligibility",()=>{let{requestContext:e}=this.props,{pwaUpsellBannerEligibility:t}=this.state;if(!(0,z.So)(window)&&e&&!t&&window.navigator.userAgent){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"windows";else if(this.installPromptEvent)return"chrome"}return"notEligible"}),el(this,"handleInstallWindowsPWA",e=>{e(),(0,eo.nP)("windows.web.upsell.completed"),this.setState({pwaUpsellBannerEligibility:"notEligible"})}),el(this,"handleInstallChromePWA",e=>{e(),(0,eo.nP)("chrome.web.upsell.completed"),this.setState({pwaUpsellBannerEligibility:"notEligible"})}),el(this,"handleDismissChromePWAUpsell",e=>{e(),(0,eo.nP)("chrome.web.upsell.dismissed"),this.setState({pwaUpsellBannerEligibility:"notEligible"})}),el(this,"renderItem",({data:e,itemIdx:t})=>{let{homefeedData:i,lfvExperiences:s,location:n}=this.props;if(!e||!e.type)return console.error("Invalid data received. ",t,e),null;let o=i?.find(({type:e})=>"home_feed_tabs"===e)?.tabs,{boardId:a,holidayFinds:r}=(0,q.mB)(n.search),l=o?this.getCurrentTabIndex(n,a,r,o):V.e,c=l>=1&&o[l-1]?.tab_type==="pinterest_picks",h=!!c&&o[l-1]?.action.quick_save_icon===1,u=c&&h;switch(e.type){case"pin":let p=!!s&&!!(0,j.Z)(s);return(0,er.jsx)(et.ZP,{duploQueryRef:null,imageOnlyOption:p?"image-only":"default",isEggsUi:u,pinId:e.id,saveButtonOptions:u?{savedInfo:{boardId:void 0,pinId:e.id,title:void 0,url:void 0},type:"inline"}:void 0,slotIndex:t,surface:"AuthHomefeed",trackingParams:e.tracking_params,viewParameter:u?4055:92,viewType:1});case"story":{let{story_type:i}=e;if((0,eo.nP)("web_story_card_type",{sampleRate:1,tags:{story_type:i||"unknown",surface:"homefeed"}}),"BUBBLE_ONE_COL"===i)return(0,er.jsx)(ey,{bubbles:e.objects,id:e.id,referringSource:e.referring_source,slotIndex:t,storyType:i,title:e.title,viewParameter:92,viewType:1});if("featured_boards"===i)return(0,er.jsx)(d.default,{slotIndex:t,story:e,surface:"AuthHomefeed",viewParameter:92,viewType:1});return(0,er.jsx)(ev,{component:u?14769:void 0,isEggsUi:u,itemIdx:t,saveButtonOptions:u?{savedInfo:{boardId:void 0,pinId:e.id,title:void 0,url:void 0},type:"inline"}:void 0,story:e,surface:"AuthHomefeed",viewParameter:u?4055:92,viewType:1})}default:return null}})}componentDidMount(){let{checkExperiment:e,experienceClient:t,history:i,location:s,mountWebRepinPlacement:n,toastManagerContext:o}=this.props;t.triggerExperimentsForPlacement(1000116),e("web_disable_cedexis_sampling").anyEnabled||l.inject(),(0,q.mB)(s.search).show_error?o.showOneToast(({hideToast:e})=>(0,er.jsx)(x.Z,{duration:5e3,onHide:e,text:this.props.i18n.bt("We can’t find that idea. Try searching for one just like it.", "We can’t find that idea! Try searching for one just like it.", " - ", undefined, true)})):s.state&&"/pin-builder/"===s.state.from?s.state.boardName&&s.state.imageUrl&&this.handlePinSuccessPinBuilder():(0,q.mB)(s.search).show_yip_modal&&(i.replace("/homefeed/"),this.setState({showYipModal:!0})),window.addEventListener("focus",this.onWindowFocus),window.addEventListener("blur",this.onWindowBlur),window.addEventListener("beforeinstallprompt",this.onInstallPrompt),document.addEventListener("scroll",this.handleScroll),n()}componentDidUpdate(e){let{dataIsFetching:t,history:i,homefeedData:s}=this.props,{refreshReason:n}=this.state,{dataIsFetching:o,homefeedData:a}=e;if(s&&a&&o&&!t&&s.length<=a.length){let e=i&&"POP"!==i.action,t=eA(s,10),o=eA(a,10);this.logRefreshStats(n||(e?"ROUTE_CHANGE":"UNKNOWN"),eS(o,t)),this.setState({isRefreshing:!1,refreshReason:null})}}logRefreshStats(e,t){let{currentHistoryStack:i,requestContext:s}=this.props,n={appType:"web",language:s.language||"unknown",locale:s.locale||"unknown",refreshReason:e},o=JSON.parse((0,U.q)(h.g,null)),a=o?.time?new Date(o.time):null,r=i&&i.length>1?i[i.length-2]:{};T.default.logToServer(T.default.SERVER_LOG_TYPE.HF_REFRESH,T.default.HTTP_METHOD.POST,{refreshReason:e,lastRoute:r.match,timeSinceHomefeed:a?Date.now()-a.getTime():null,timeSinceBlur:this.windowBlurStart?Date.now()-this.windowBlurStart:null}),(0,eo.nP)("home_product.homefeed.refresh",{sampleRate:1,tags:n}),t&&(0,eo.nP)("home_product.homefeed.refresh.no_change",{sampleRate:1,tags:n})}componentWillUnmount(){let{unmountWebRepinPlacement:e}=this.props;window.removeEventListener("focus",this.onWindowFocus),window.removeEventListener("blur",this.onWindowBlur),window.removeEventListener("beforeinstallprompt",this.onInstallPrompt),(0,U.N)(h.g,JSON.stringify({time:Date.now(),scrollPosition:[window.scrollX,window.scrollY]})),document.removeEventListener("scroll",this.handleScroll),e()}get isHomefeed(){let{inLocalNavigation:e,location:t}=this.props,i=(0,q.mB)(t.search);return!(i&&"string"==typeof i.boardId&&i.boardId)||!!e}handlePinSuccessPinBuilder(){let{location:e,toastManagerContext:t}=this.props,{boardName:i}=e.state||{},{imageUrl:s}=e.state||{},n=(0,E.nk)(this.props.i18n.bt("You saved this Pin to {{ selectedBoardName }}!", "You saved this Pin to {{ selectedBoardName }}!", "Board create confirmation message", undefined, true),{selectedBoardName:(0,er.jsx)(a.xv,{inline:!0,lineClamp:1,size:"200",weight:"bold",children:i},i)});t.showOneToast(({hideToast:e})=>(0,er.jsx)(x.Z,{duration:5e3,imageUrl:s,onHide:e,text:(0,er.jsx)(a.xv,{children:n},`toast_${i}`)}))}getCurrentTabIndex(e,t,i,s){return i||"/homefeed/holiday_finds/"===e.pathname?s.findIndex(e=>"pinterest_picks"===e.tab_type)+1:t?s.findIndex(e=>e?.id===t)+1:V.e}getColumnSpanConfig(e){let t="recently_viewed"===e.story_type&&this.props.checkExperiment("web_recently_viewed_responsive").anyEnabled;if(e.display_options?.item_view_rep_style?.explore_article_rep_style===10||t)return{sm:2,md:3,lg:3,xl:4};if("story"===e.type&&"featured_boards"===e.story_type){let t=e?.objects?.length||0;return{sm:2,md:2,lg:Math.min(3,t),xl:Math.min(4,t)}}return"story"===e.type&&e?.display_options?.content_display?.grid_layout?.cols?e.display_options.content_display.grid_layout.cols:e.columnSpan??1}render(){let{hasScrolled:e,hideTabs:t,isRefreshing:i,pwaUpsellBannerEligibility:n,showYipModal:o}=this.state,{checkExperiment:r,dataIsFetching:l,dataIsRefreshing:d,headerHeight:h,homefeedData:p,i18n:m,inLocalNavigation:f,location:w,requestContext:x,viewer:A}=this.props,S=p||[],E=S[0],j=!!E&&"story"===E.type&&["board_more_ideas","boards_more_ideas_feed_upsell_list_cards","boards_more_ideas_feed_upsell_list_cards_square"].includes(E.story_type);j&&E.objects&&(E.objects=E.objects.filter(e=>e?.images&&"70x"in e.images&&"170x"in e.images));let C=j?S.slice(1):S,T=w&&w.pathname.includes("news_hub"),Z=f?C.find(({type:e})=>"home_feed_tabs"===e)?.tabs:void 0,{boardId:k,holidayFinds:z}=(0,q.mB)(w.search),L=r("hfp_pinterest_picks_mock_exp").anyEnabled||r("hfp_web_holiday_finds_gtm").anyEnabled,R=Z?this.getCurrentTabIndex(w,k,z,Z):V.e,F=r("dweb_eu_personalized_ads_prompt").anyEnabled;return(0,er.jsxs)(s.Fragment,{children:[(0,er.jsx)(b.a3,{eligibleIds:[505801],placementId:11,children:({complete:e})=>(0,er.jsx)(H.Z,{children:(0,er.jsx)(ew,{complete:e})})}),(0,er.jsx)(b.a3,{eligibleIds:[504943,505226],placementId:11,children:({complete:e,dismiss:t,experience:{display_data:i}})=>{let s=!("is_blocking"in i)||!!i.is_blocking,n=i.message_blocking;return s||(n=i.message_dismissible),(0,er.jsx)(eu,{complete:e,dismiss:t,isBlockingModal:s,modalDescription:n})}}),F&&(0,er.jsx)(b.a3,{eligibleIds:[507007],placementId:11,children:({complete:e,dismiss:t,experience:{display_data:i}})=>(0,er.jsx)(ef,{complete:e,dismiss:t,displayData:i})}),(0,er.jsx)(b.a3,{eligibleIds:[505111],placementId:11,children:({complete:e,dismiss:t})=>(0,er.jsx)(s.Suspense,{children:(0,er.jsx)(e_,{complete:e,dismiss:t})})}),"windows"===n&&(0,er.jsx)(b.a3,{eligibleIds:[501123],placementId:11,children:({complete:e})=>(0,er.jsx)(s.Suspense,{children:(0,er.jsx)(em,{handleComplete:()=>this.handleInstallWindowsPWA(e),language:x.language||"",locale:x.locale||""})})}),"chrome"===n&&(0,er.jsx)(b.a3,{eligibleIds:[500999],placementId:11,children:({complete:e,dismiss:t})=>(0,er.jsx)(M.Z,{completeButtonText:m.bt("Get the app", "Get the app", "Confirm button to install Chrome PWA", undefined, true),dismissButtonText:m.bt("Not now", "Not now", "Dismiss button for Chrome PWA upsell banner", undefined, true),message:m.bt("Get our Chrome app for faster searching and saving", "Get our Chrome app for faster searching and saving", "Text for banner to install Chrome PWA", undefined, true),onComplete:()=>this.handleInstallChromePWA(e),onDismiss:()=>this.handleDismissChromePWAUpsell(t)})}),e&&(0,er.jsx)(b.a3,{eligibleIds:[502535],placementId:11,children:({complete:e,dismiss:t})=>(0,er.jsx)(s.Suspense,{children:(0,er.jsx)(ep,{handleComplete:e,handleDismiss:t})})}),o&&(0,er.jsx)(g.Z,{name:"SafeSuspense_AuthHomefeed_YearInPreview",children:(0,er.jsx)(eh,{onModalDismiss:()=>{this.setState({showYipModal:!1})}})}),(0,er.jsx)(N.Z,{view:1,viewParameter:92,children:(0,er.jsxs)(s.Fragment,{children:[A.isAuth&&A.isPartner&&!T&&(0,er.jsx)(g.Z,{name:"SafeSuspense_AuthHomefeed_MoreIdeas",children:(0,er.jsx)(a.Le,{top:h,zIndex:new a.Ry(2*!!this.isHomefeed),children:(0,er.jsx)(a.xu,{"data-root-margin":"more-ideas-tabs",height:c.Z,children:(0,er.jsx)(ec,{fallback:(0,er.jsx)(a.xu,{height:c.Z}),hideTabs:t,nonFixed:!0})})})}),this.isHomefeed&&(0,er.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:P.$H}},"data-test-id":"homefeed-feed",children:[(0,er.jsx)(J.Z,{text:this.props.i18n.bt("Home", "Home", "text for accessibility hidden heading", undefined, true)}),(d||i)&&(0,er.jsx)(a.xu,{paddingY:6,children:(0,er.jsx)(a.xH,{accessibilityLabel:this.props.i18n.bt("Refreshing homefeed", "Refreshing homefeed", "Authhomefeed.refreshSpinner", undefined, true),show:!0})}),j&&(0,er.jsx)(a.xu,{marginBottom:2,marginTop:4,children:(0,er.jsxs)("div",{className:"gridCentered",children:[(0,er.jsx)(I.Z,{unsafeCSS:(0,v.Z)({gutterWidth:0,isRTL:!1,itemWidth:P.yF+P.ZZ,maxColumns:C.length,minColumns:P.yc})}),(0,er.jsx)(eg,{disableLastGutter:!0,fallback:(0,er.jsx)(a.xu,{height:142}),feed:[E],view:1,viewParameter:92})]})}),!!Z?.length&&A.isAuth&&!A.isPartner&&(0,er.jsx)(K.Z,{dataLayoutShiftBoundaryId:"TabsContentHeader",position:"sticky",shouldShowShadow:!0,stickyZIndex:new a.H3(this.isHomefeed?[new a.Ry(5)]:[new a.Ry(6)]),style:{width:"100%",backgroundColor:"#ffffff",transform:t?"translateY(-100%)":"translateY(0)",transition:"all 0.3s ease-in-out"},children:(0,er.jsx)(a.xu,{"data-root-margin":"more-ideas-tabs",marginBottom:4*(R===V.e),marginEnd:(0,u.mH)(),marginStart:(0,u.mH)(),overflow:"visible",children:(0,er.jsx)(ec,{boards:Z,currentTabIndex:R,hideTabs:t,inLocalNavigation:f,nonFixed:!0})})}),!!Z?.length&&!!R&&"pinterest_picks"===Z[R-1].tab_type&&L&&(0,er.jsx)(ed,{getColumnSpanConfig:this.getColumnSpanConfig,renderItem:this.renderItem}),!!Z?.length&&!!R&&"pinterest_picks"!==Z[R-1].tab_type&&(0,er.jsx)(eb,{inLocalNavigation:f,tabBoard:Z[R-1]}),R===V.e&&(0,er.jsxs)(s.Fragment,{children:[(0,er.jsx)(B.Z,{includeBackgroundImages:!0,includeVideos:!0,isAtEndOfFeed:this.props.dataIsAtEnd,isPlaceholderGrid:l&&!C.length,itemCount:C.length,pinData:C,children:(0,er.jsx)(y.default,{_dynamicHeights:!0,_getColumnSpanConfig:e=>this.getColumnSpanConfig(e),cacheKey:"homefeed",isFetching:l,isLoadedAccessibilityLabel:C.length>0?this.props.i18n.bt("More Pins loaded for homefeed", "More Pins loaded for homefeed", "authhomefeed.masonry.paginationLoaded", undefined, true):this.props.i18n.bt("Loaded homefeed", "Loaded homefeed", "authhomefeed.masonry.loaded", undefined, true),isLoadingAccessibilityLabel:C.length>0?this.props.i18n.bt("Loading more Pins for homefeed", "Loading more Pins for homefeed", "authhomefeed.masonry.paginationLoading", undefined, true):this.props.i18n.bt("Loading home feed", "Loading homefeed", "authhomefeed.masonry.loading", undefined, true),isLoadingStateEnabled:!0,items:C,loadItems:this.loadItems,masonryRef:ex,renderItem:this.renderItem})}),C.length>0&&(0,er.jsx)(_.Z,{surface:"homefeed"})]}),(0,er.jsx)(b.O9,{placementId:11})]})]})})]})}}function eE(e){let t=(0,S.ZP)(),i=(0,n.I0)(),a=(0,s.useRef)(0),r=(0,o.TH)(),l=(0,$.Z)(),d=(0,L.B)(),c=(0,W.Z)(),u=(0,en.AF)(),_=(0,ee.f)(),{pins:f,clear:g}=(0,X.Z)(),y=(0,O.F9)(),{mountPlacement:v,unmountPlacement:x}=(0,b.M0)(),{checkExperiment:P}=(0,k.F)(),I=(0,A.aX)(),E=(0,w.Z)(),j=(0,o.k6)(),T=(0,G.Z)(),{shouldMaintainHomefeed:z}=(0,h.Z)(),B=(0,Q.t)(),{isAtEnd:H,isFetching:U,isRefreshing:D,fetchMore:N,data:M,refresh:q}=(0,R.Z)({...e.homefeedResourceConfig,enabledRouteRefresh:!z}),K=P("hfp_local_nav_tabs_web").anyEnabled;(0,Y.Z)(()=>{let e=M||[];if(l.isAuth&&!l.isPartner&&(0,C.Z)(l.createdAt)&&e.length>0&&1){let e=F.ZP.getItem(m.M8);if(e||f.length>0){let s=[...f,...e?[{id:e}]:[]];setTimeout(()=>{s.forEach(({id:e,nodeId:s})=>{(0,p.Z)({description:"",entityId:e,link:"",promotedIsRemovable:void 0,title:""},t).then(t=>{let{id:n,url:o,name:a}=t;i((0,ei.d)({boardId:n,url:o,title:a||"",pinId:e||"",nodeId:s}))})}),c({action:"trigger",item:"unauth-save-button-quicksave"}),i((0,es.Z)(!0)),F.ZP.removeItem(m.M8),g()},1500)}}});let J=(0,s.useCallback)(()=>v(1000294,{}),[v]),V=(0,s.useCallback)(()=>x(1000294),[x]);return(0,Z.Z)(r,y.showToast,t),(0,er.jsx)(s.Fragment,{children:(0,er.jsx)(eI,{...e,checkExperiment:P,currentHistoryStack:I,dataIsAtEnd:H,dataIsFetching:U,dataIsRefreshing:D,dispatch:i,experienceClient:E,fetchMoreData:N,headerHeight:B,history:j,homefeedData:M,i18n:t,inLocalNavigation:K,lastScrollYRef:a,lfvExperiences:T,location:r,mostRecentPLP:_.id?u[_.id]:null,mountWebRepinPlacement:J,refreshData:q,requestContext:d,toastManagerContext:y,unmountWebRepinPlacement:V,viewer:l})})}function ej(e){let t=(0,r.q)(),i=(0,s.useMemo)(()=>t(),[t]);return(0,er.jsx)(eE,{...e,homefeedResourceConfig:i})}},811203:function(e,t,i){i.d(t,{Z:()=>s});let s=64},822464:function(e,t,i){i.d(t,{Z:()=>r,g:()=>o});var s=i(616550),n=i(591226);let o="lastOnHomefeed",a=["/","/homefeed/"];function r(){let{pathname:e}=(0,s.TH)(),t=(0,s.k6)(),i=a.includes(e),r=t&&"POP"!==t.action;if(i&&r){let e=JSON.parse((0,n.q)(o,null)),t=e?.time?Date.now()-e.time:0;return{shouldMaintainHomefeed:t>0&&t/6e4<2.5,lastHFScrollPosition:e?.scrollPosition}}return{shouldMaintainHomefeed:!1}}},374114:function(e,t,i){i.d(t,{Z:()=>n});var s=i(575108);async function n(e,t){let i=async()=>{let e={name:t.bt("Quick saves", "Quick Saves", "quickSave.defaultBoardName", undefined, true),layout:"quick_saves",privacy:"public",return_existing:!0,aux_data:{source:"unauth_quick_save"}};return s.Z.create("BoardResource",e).callCreate()},{resource_response:{data:n}}=await i(),o=async t=>s.Z.create("RepinResource",{board_id:t,description:e.description||"",is_removable:e.promotedIsRemovable??void 0,link:e.link,pin_id:e.entityId||"",title:e.title||""}).callCreate({showError:!1});return await o(n.id),n}},667314:function(e,t,i){i.d(t,{$H:()=>n,AG:()=>a,M5:()=>r,W5:()=>l,_Y:()=>o,mH:()=>d});var s=i(883119);let n=16,o=137,a=103,r="rgba(17,17,17,0.4)",l=new s.Ry(1),d=()=>5},451208:function(e,t,i){i.d(t,{FK:()=>a,Mp:()=>l,dO:()=>r,e$:()=>d,hy:()=>c,z5:()=>h});var s=i(952949),n=i(941404);let o=e=>e[e.length-1],a=({subscriptionId:e,endpoint:t})=>e||o(t.split("/")),r=(e,t)=>(0,n.tj)(e,{...t});function l(e){let t="=".repeat((4-e.length%4)%4),i=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(i),n=new Uint8Array(s.length);for(let e=0;e<s.length;e+=1)n[e]=s.charCodeAt(e);return n}let d=e=>e.bt("Sorry, something went wrong at our end.", "Sorry! Something went wrong on our end.", "RequestDataUI.Toast.unknownFailure", undefined, true),c=e=>e.bt("Chrome users can activate browser notifications when push is turned on", "Chrome users can activate browser notifications when push is turned on", "notification_settings.permissions.chrome_browser_enabling.description", undefined, true),h=(e,t)=>{switch(t){case s.b.PUSH:return e.bt("You won't get any more push notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "You won't get any more push notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "profile.settings.notifications.settingsConfirmation.description", undefined, true);case s.b.EMAIL:return e.bt("You won't get any more email notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "You won't get any more email notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "profile.settings.notifications.settingsConfirmation.description", undefined, true);case s.b.NEWS:return e.bt("You won't get any more in-app notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "You won't get any more in-app notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "profile.settings.notifications.settingsConfirmation.description", undefined, true);case s.b.WEB_PUSH:return e.bt("You won't get any more web push notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "You won't get any more web push notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "profile.settings.notifications.settingsConfirmation.description", undefined, true);default:return e.bt("You won't get any more notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "You won't get any more notifications from Pinterest for your personal account (except important updates, account settings and privacy)", "profile.settings.notifications.settingsConfirmation.description", undefined, true)}}},952949:function(e,t,i){i.d(t,{b:()=>s});let s={PUSH:"push",EMAIL:"email",NEWS:"news",WEB_PUSH:"web_push"}},81497:function(e,t,i){i.d(t,{Z:()=>u});var s=i(616550),n=i(686319),o=i(475498),a=i(451208),r=i(341742),l=i(785893);let d=async(e,t,i)=>{try{await (0,n.Z)({url:`/v3/email/fatigue/${e}/`,method:"DELETE"})}catch(s){let e=(0,a.e$)(i);t(({hideToast:t})=>(0,l.jsx)(o.Z,{onHide:t,text:e}))}},c=async(e,t,i)=>{try{await (0,n.Z)({url:`/v3/email/journey/fatigue/${e}/`,method:"DELETE"})}catch(s){let e=(0,a.e$)(i);t(({hideToast:t})=>(0,l.jsx)(o.Z,{onHide:t,text:e}))}},h=(e,t,i,s)=>{let n,o="",a=s.bt("OK! You'll continue to see notifications about this interest", "Got it! You'll continue to see notifications about this interest", "email.Feedback.Experience.Interest.Positive", undefined, true),r=s.bt("OK. You'll see fewer notifications about this interest", "Got it! You'll see less notifications about this interest", "email.Feedback.Experience.Interest.Negative", undefined, true);return"interest_positive"===e?(o=a,n=()=>{}):"interest_negative"===e?(o=r,n=()=>{d(t,i,s)}):"journey_positive"===e?(o=a,n=()=>{}):"journey_negative"===e?(o=r,n=()=>{c(t,i,s)}):e.startsWith("survey_")&&(o=s.bt("OK. This will help improve the quality of your emails in the future", "Got it! This will help improve the quality of your emails in the future", "email.Feedback.Experience.Recommendation.Response", undefined, true)),[o,n]},u=(e,t,i)=>{let n=new URLSearchParams(e?.search),a="31"===n.get("utm_source"),d=n.get("utm_content")||"",[c,u]=h(n.get("e_t_s")||"",d,t,i),p=(0,s.k6)(),m=()=>{let e=i.bt("Undo", "Undo", "email.Feedback.Experience.undoButton.label", undefined, true);t(({hideToast:t})=>(0,l.jsx)(o.Z,{duration:6e3,onHide:t,primaryAction:u?{accessibilityLabel:e,label:e,role:"button",onClick:()=>{t(),u()}}:void 0,text:c}))};(0,r.Z)(()=>{e?.pathname==="/"&&c&&a&&(n.delete("e_t_s"),p.push({pathname:e.pathname,search:n.toString()}),m())})}},45059:function(e,t,i){i.d(t,{C:()=>n,e:()=>s});let s=0,n=new Set(["/","/today"])},542963:function(e,t,i){i.d(t,{$:()=>l,Z:()=>h});var s=i(111330),n=i(121836),o=i(274320),a=i(753143),r=i(238589);let l=2,d=e=>e?.pins??[],c=e=>e.length?{pins:e}:null,h=()=>{let e=(0,a.M0)(),t=d(e.accessAllowed?e.getItem(s.s1):r.ZP.getItem(n.w3)),i=t=>e.accessAllowed?e.setItem(s.s1,c(t)):r.ZP.setItem(n.w3,c(t)),h=l,{checkExperiment:u}=(0,o.F)(),p=()=>{let e=u("mweb_block_unauth_save").group;if(e.startsWith("enabled")){let[,t]=e.split("_");h=Number(t)}let i=u("mweb_q2_mau_push_pc").group||u("mweb_q2_mau_push_pc_advanced").group||u("mweb_q2_mau_push_pc_emergency").group,s=u("mweb_q2_mau_push_pc_eu").group;return[i,s].includes("enabled")&&(h=0),[i,s].includes("control")&&(h=l),t.length<h};return{pins:t,save:e=>{p()&&i(t.filter(({id:t})=>t!==e.id).concat([e]))},unsave:e=>i(t.filter(({id:t})=>t!==e)),isSaved:e=>t.some(({id:t})=>t===e),clear:()=>i([]),canSaveMore:p}}},966838:function(e,t,i){function s(e){return{type:"PIN_QUICK_SAVE",payload:e}}function n(e){return{type:"UPDATE_PINS_WITH_QUICKSAVE_REPIN",payload:{newPin:e}}}i.d(t,{X:()=>n,d:()=>s})},373950:function(e,t,i){i.d(t,{Z:()=>s});function s(e){return{type:"UPDATE_HAS_QUICKSAVE_BOARD",payload:{createdQuicksaveBoard:e}}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/62719.en_GB-5c85f3c91caf152d.mjs.map