(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["31262"],{316387:function(e,t,n){var i,o;n.r(t),n.d(t,{default:()=>s});let l=(o=[i={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CommentThreadContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"commentCount",storageKey:null},{alias:null,args:null,concreteType:"AggregatedDidItData",kind:"LinkedField",name:"didItData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imagesCount",storageKey:null}],storageKey:null},i],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"doneByMe",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"commentsDisabled",storageKey:null},i,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null});l.hash="6e4bec581cece19361386d6124ddde90";let s=l},767439:function(e,t,n){n.d(t,{Z:()=>l});var i=n(667294);let o="undefined"!=typeof document?document:{},l=()=>{let e=(0,i.useRef)(void 0),t=o.documentElement,{body:n}=o;return t?[()=>{if(!n||!n.style||e.current)return;let i=window.innerWidth-t.clientWidth,o=parseInt(window.getComputedStyle(n).getPropertyValue("padding-right"),10)||0;t.style.position="relative",t.style.overflow="hidden",n.style.position="relative",n.style.overflow="hidden",n.style.paddingRight=`${o+i}px`,e.current=!0},()=>{n&&n.style&&e.current&&(t.style.position="",t.style.overflow="",n.style.position="",n.style.overflow="",n.style.paddingRight="",e.current=!1)}]:[]}},762802:function(e,t,n){n.d(t,{Z:()=>a});var i=n(667294),o=n(765533),l=n(603316);class s extends i.PureComponent{constructor(...e){var t,n,i;super(...e),t="handleKeyDown",n=e=>{let{onClose:t,goToNext:n,goToPrevious:i}=this.props,s=e.keyCode||e.code;!e.ctrlKey&&!e.metaKey&&(["input","select","button","textarea"].includes(((document.activeElement||{}).tagName||"").toLowerCase())||document.activeElement&&document.activeElement.isContentEditable||(s===o.Z.LEFT?(e.preventDefault(),e.stopPropagation(),i&&i(),(0,l.nP)("web_keydown_left")):s===o.Z.RIGHT?(e.preventDefault(),e.stopPropagation(),n&&n(),(0,l.nP)("web_keydown_right")):s===o.Z.ESCAPE&&(e.preventDefault(),e.stopPropagation(),t())))},(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}render(){return null}}let a=s},406196:function(e,t,n){n.d(t,{N:()=>d,d:()=>r});var i=n(667294),o=n(655202),l=n(729434),s=n(785893);let{Provider:a,useHook:r}=(0,l.Z)("Flag"),d=({children:e})=>{let[t,n]=(0,i.useState)(),[l,r]=(0,i.useState)(o.Zw.REPORT),[d,c]=(0,i.useState)(o.qb.STARTED),[m,u]=(0,i.useState)(),[h,_]=(0,i.useState)(),g=(0,i.useMemo)(()=>({flagReason:h,flow:l,status:d,selectedReason:m,modalTitle:t,setFlagReason:_,setFlow:r,setModalTitle:n,setStatus:c,setSelectedReason:u}),[t,l,d,m,h]);return(0,s.jsx)(a,{value:g,children:e})}},655202:function(e,t,n){n.d(t,{Vm:()=>l,Zw:()=>i,qb:()=>o});let i={REPORT:"REPORT",BLOCK:"BLOCK",END:"END"},o={STARTED:"STARTED",SELECTED:"SELECTED",SUBMITTED:"SUBMITTED",PROCESSING:"PROCESSING",COMPLETED:"COMPLETED"},l={CONVERSATION:"CONVERSATION",DID_IT:"DID_IT"}},47944:function(e,t,n){n.d(t,{Z:()=>a});var i=n(883119),o=n(744862),l=n(525839),s=n(785893);let a=({isQuestion:e,name:t,size:n,src:a})=>{let r=(0,l.ZP)();return(0,s.jsxs)(i.xu,{"data-test-id":"comment-avatar-container",position:"relative",children:[(0,s.jsx)(o.qE,{name:t,size:n,src:a}),e&&(0,s.jsxs)(i.xu,{alignItems:"center",bottom:!0,display:"flex",height:16,justifyContent:"center",marginBottom:-1,marginEnd:-1,position:"absolute",right:!0,width:16,children:[(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r.bt("Q&A comment", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"dark",icon:"speech"})}),(0,s.jsx)(i.xu,{position:"absolute",children:(0,s.jsx)(i.JO,{accessibilityLabel:r.bt("Q&A comment", "Q and A comment", "comment.userAvatar.creator.q&aIndicator", undefined, true),color:"light",icon:"question-mark",size:8})})]})]})}},223296:function(e,t,n){n.d(t,{f:()=>a,v:()=>r});var i=n(667294),o=n(729434),l=n(785893);let{Provider:s,useHook:a}=(0,o.Z)("CommentMedia");function r({children:e}){let[t,n]=(0,i.useState)({height:150,width:150}),[o,a]=(0,i.useState)(null),[r,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),[u,h]=(0,i.useState)(""),_=()=>{a(null),d(null),m(null),h("")},g=(0,i.useCallback)(()=>_(),[]),p=(0,i.useMemo)(()=>({mediaDimensions:t,mediaId:r,mediaType:c,mediaUrl:u,photoFile:o,removeSelectedPhoto:g,setMediaDimensions:n,setMediaId:d,setMediaType:m,setMediaUrl:h,setPhotoFile:a}),[t,o,r,c,u,g]);return(0,l.jsx)(s,{value:p,children:e})}},780734:function(e,t,n){n.d(t,{Z:()=>es});var i=n(883119),o=n(667294),l=n(581722),s=n(473727),a=n(767439),r=n(111923),d=n(406196),c=n(47944),m=n(525839),u=n(785893);let h=({color:e,isMarkedHelpful:t})=>{let n=(0,m.ZP)();return(0,u.jsx)(i.JO,{accessibilityLabel:n.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true),color:t?"brandPrimary":e,icon:"thumbs-up",inline:!0,size:12})};var _=n(296691),g=n(333651),p=n(773655),x=n(744862);let y={helpfulStyle:{backgroundImage:`url(${g})`},lovedStyle:{backgroundImage:`url(${p})`}},f=({response:e,handleReactionListHover:t,maybeDismissReactionListWithDelay:n})=>{let o=14===e.reaction_type,l=1===e.reaction_type,s=e.user.is_private_profile?e.user.first_name:e.user.full_name;return(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.Tg,{href:`/${e.user.username}/`,onBlur:n,onFocus:t,children:(0,u.jsxs)(i.kC,{alignItems:"center",children:[(0,u.jsx)(i.xu,{maxWidth:40,children:(0,u.jsx)(x.qE,{accessibilityLabel:"",name:s,outline:!0,size:"sm",src:e.user.image_medium_url})}),(0,u.jsx)(i.xu,{marginStart:2,maxWidth:80,children:(0,u.jsx)(i.xv,{color:"inverse",size:"100",weight:"bold",children:s})})]})}),(0,u.jsxs)(i.xu,{alignContent:"end",display:"flex",padding:2,children:[l&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:y.lovedStyle},"data-test-id":"comment-reaction-tray-loved-emoji",height:16,width:16}),o&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:y.helpfulStyle},"data-test-id":"comment-reaction-tray-helpful-emoji",height:16,width:16})]})]})};var b=n(886981),v=n(535701),j=n(448505),P=n(7872);let w=["userreaction.id","userreaction.reaction_type","userreaction.user()","user.first_name","user.full_name","user.id","user.image_medium_url","user.is_private_profile","user.username"],C=({commentId:e,handleReactionListHover:t,isMarkedHelpfulByMe:n,isLovedByMe:l,isTry:s,maybeDismissReactionListWithDelay:a})=>{let r=(0,v.Z)(),d=(0,j.Z)(),c=(0,b.Z)({name:"ApiResource",options:{url:s?`/v3/did_it/${e}/reacted_by/`:`/v3/aggregated_comments/${e}/reacted_by/`,field_sets:w}}),m=(0,P.lJ)(r,d)||("id"in r&&r.id?r.id:""),h=c.data;(l||n)&&h&&(h=h.filter(e=>e.user.id!==m),h=[{id:e,reaction_type:l?1:14,user:{first_name:(0,P.Fk)(r,d),full_name:(0,P.Fk)(r,d),id:m,image_medium_url:(0,P.gJ)(r,d),is_private_profile:!!r.isAuth&&!!r.isPrivateProfile,username:(0,P.Ms)(r,d)}},...h]);let _=(0,o.useRef)(null);return(0,o.useEffect)(()=>{let{current:e}=_,t=()=>{c.isFetching||(c.isAtEnd?e?.removeEventListener("scroll",t):c.fetchMore())};return e?.addEventListener("scroll",t),()=>{e?.removeEventListener("scroll",t)}},[c]),(0,u.jsx)(i.xu,{ref:_,color:"selected",maxHeight:140,overflow:"scroll",rounding:2,width:180,children:h?.map(e=>(0,u.jsx)(i.xu,{"data-test-id":"reaction-list-single-user",margin:3,children:(0,u.jsx)(f,{handleReactionListHover:t,maybeDismissReactionListWithDelay:a,response:e})},e.id))})};var A=n(821806),I=n(747859);let T=(0,o.lazy)(()=>n.e("46308").then(n.bind(n,766289))),S="comment-reaction-container-entry-point",z=({commentId:e,dismissReactionList:t,helpfulCount:n,inCommentRepRedesignExp:l,isMarkedHelpfulByMe:s,isLovedByMe:a,isReactionListOpen:r,isTry:d,lovedCount:c,onReactionCountHover:h,onToggleHelpful:x,onToggleLove:y})=>{let f=(0,m.ZP)(),{isCommentComposerFocused:b}=(0,I.x4)(),v=(0,o.useRef)(null),j=l?12:16,[P,w]=(0,o.useState)(!1),z=!1,k=(c||0)+(n||0);s&&a&&(k-=1);let L=e=>()=>{w(e)},E=()=>{z=!0,h()},R=()=>{z=!1,setTimeout(()=>{z||t()},1e3)},D=l?(0,u.jsx)(i.xu,{"data-test-id":S,margin:-1.5,children:(0,u.jsx)(i.hU,{accessibilityLabel:f.bt("React", "React", "comment.actionbar.react", undefined, true),icon:"heart-outline",onClick:y(!0),size:"xs"})}):(0,u.jsx)(i.xu,{"data-test-id":S,children:P?(0,u.jsx)(i.iP,{onMouseLeave:L(!1),onTap:L(!1),children:(0,u.jsx)(A.Z,{children:(0,u.jsx)(T,{setHelpful:x(!0),setLoved:y(!0)})})}):(0,u.jsx)(i.iP,{onMouseEnter:L(!0),onTap:L(!0),children:(0,u.jsx)(i.JO,{accessibilityLabel:f.bt("React", "React", "comment.actionbar.react", undefined, true),color:"subtle",icon:"heart-outline",size:j})})});return(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:l?1.5:1,column:0},children:[s||a?(0,u.jsx)(i.iP,{onTap:()=>{x(!1)(),y(!1)()},children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${a?p:g})`,backgroundSize:"contain"}},"data-test-id":a?"comment-reaction-container-loved-emoji":"comment-reaction-container-helpful-emoji",height:j,width:j})}):D,k>0&&(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.iP,{onMouseEnter:E,onMouseLeave:R,onTap:E,children:(0,u.jsx)(i.xu,{ref:v,"data-test-id":"comment-reaction-container-reaction-count",display:l?"flex":void 0,children:(0,u.jsx)(i.xv,{color:l?"default":"subtle",inline:!0,size:l?"100":"200",weight:"bold",children:k})})}),r&&(0,u.jsx)(i.mh,{zIndex:_.Ty,children:(0,u.jsx)(i.J2,{anchor:v.current,idealDirection:"down",onDismiss:t,positionRelativeToAnchor:!1,shouldFocus:!b,children:(0,u.jsx)(i.iP,{onMouseEnter:E,onMouseLeave:R,children:(0,u.jsx)(C,{commentId:e,handleReactionListHover:E,isLovedByMe:a,isMarkedHelpfulByMe:s,isTry:d,maybeDismissReactionListWithDelay:R})})})})]})]})};var k=n(624895),L=n(54424),E=n(545961),R=n(162321);function D(e){let{comment:t,commentTags:n,handlePhotoTap:l,inCommentRepRedesignExp:s,isDesktop:a,previewPhoto:r,taggedUsers:d}=e,[c,m]=(0,o.useState)(!1),{user:{username:h}}=t,_="text"in t?t.text:t.details,g=s?_:`${h} ${_}`,{height:p,url:x,width:y}=r||{},f=p??E.Vb,b=y??E.mu;return(0,u.jsxs)(i.xu,{children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,shouldShowFirstNameOnly:!0,taggedUsers:d,tags:n,text:g}),a||s?(0,u.jsx)(i.xu,{marginBottom:s?1.5:void 0,marginTop:s?.5:1,children:(0,u.jsx)(E.ZP,{canEnlargePhoto:a,isSelectedPhoto:!1,previewPhoto:r})}):(0,u.jsx)(i.xu,{height:150,marginBottom:a?4:2,marginTop:1,width:150,children:(0,u.jsx)(i.iP,{disabled:!a,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onTap:l,children:(0,u.jsx)(i.zd,{rounding:2,wash:!0,children:x&&(0,u.jsx)(i.Ee,{alt:x,color:"#efefef",naturalHeight:f,naturalWidth:b,src:x,children:(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{cursor:a?"zoom-in":void 0,backgroundColor:`rgba(17, 17, 17, ${.4*!!c})`}},height:"100%",width:"100%"})},x)})})})]})}var O=n(667835),Z=n(302148),M=n(105433),N=n(696323);function H(e){let{shouldPreviewNewReply:t,featuredCommentId:n,parentId:s,parentType:a,inCommentRepRedesignExp:r,inCommentsPopover:d,isDesktop:c,isLoading:h,isReadOnly:_,openOverflowMenu:g,replyingToCommentId:p,toggleEditComposer:x,toggleHelpful:y,toggleLike:f,toggleReplyComposer:b,isORBACProfileManager:v,isVideo:j,storyPinDataId:P,pinId:w,closeupAttributionId:C,aggregatedPinDataId:A,closeupAttributionUsername:I,pinnerId:T,reactionListCommentId:S,showReactionListForComment:z,viewParameter:k}=e,L=(0,m.ZP)(),E=(0,O.vs)(),R=(0,M.lV)(),D=(0,l.v9)(({feeds:e})=>{let n=e[`${N.Z.AGGREGATED_COMMENT_REPLIES}:${s}`]||[],i=e[`${N.Z.AGGREGATED_COMMENTS}:${s}`]||[];return n.concat(i).reduceRight((e,{id:n})=>{let i=R[n];return i?t?[i,...e]:[...e,i]:e},[])}),[H,F]=(0,o.useState)(1),U=H===D.length;return(0,u.jsxs)(o.Fragment,{children:[D.length>1&&(0,u.jsx)(i.iP,{onTap:()=>{F(U?0:D.length)},children:(0,u.jsxs)(i.xu,{alignItems:r?"center":void 0,display:r?"flex":void 0,marginBottom:r?6:4,children:[r?(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{background:E?"white":"black"}},height:1,marginEnd:2,width:32}):(0,u.jsx)(i.xu,{display:"inlineBlock",marginEnd:2,children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:"⎯⎯"})}),(0,u.jsx)(i.xv,{color:r?"default":"subtle",inline:!0,size:"100",weight:"bold",children:U?L.bt("Hide replies", "Hide replies", "comment.button.hideReplies", undefined, true):(0,Z.nk)(L.nbt(["View {{ commentCount }} reply", "View {{ commentCount }} replies"], D.length, "comment.button.showReplies", true),{commentCount:D.length})})]})}),(0,u.jsx)(es,{aggregatedPinDataId:A,closeupAttributionId:C,closeupAttributionUsername:I,comments:D.slice(0,H),commentsDisabled:!1,featuredCommentId:n,gapSize:r?6:2,inCommentRepRedesignExp:r,inCommentsPopover:d,isDesktop:c,isLoading:h,isORBACProfileManager:v,isReadOnly:_,isVideo:j,openOverflowMenu:g,parentId:s,parentType:a,pinId:w,pinnerId:T,reactionListCommentId:S,replyingToCommentId:p,showReactionListForComment:z,storyPinDataId:P,toggleEditComposer:x,toggleHelpful:y,toggleLike:f,toggleReplyComposer:b,userAvatarSize:"sm",viewParameter:k})]})}var F=n(980787),U=n(657043),B=n(475498),W=n(670622),G=n(2420),K=n(15667),$=n(536652),V=n(87853),q=n(542092),J=n(502066),Q=n(533076),Y=n(611134),X=n(401450),ee=n(78762);let et=(0,o.lazy)(()=>n.e("16592").then(n.bind(n,357966))),en=(0,ee.Z)(()=>n.e("73842").then(n.bind(n,434780)),void 0,e=>434780,"app-packages-comment-CommentOverflowPopover"),ei=(0,o.lazy)(()=>n.e("84046").then(n.bind(n,257233)));function eo(e){let t,n,{aggregatedPinDataId:g,shouldPreviewNewReply:p,closeupAttributionId:x,closeupAttributionUsername:y,comment:f,featuredCommentId:b,inCommentRepRedesignExp:w,inCommentsPopover:C,isDesktop:T,isReadOnly:S,isVideo:E,openOverflowMenu:N,toggleReplyComposer:ee,parentId:eo,parentType:el=q.o.pin,pinId:es,storyPinDataId:ea,replyingToCommentId:er,showReactionListForComment:ed,showTopCommentHeading:ec,toggleEditComposer:em,toggleHelpful:eu,toggleLike:eh,userAvatarSize:e_,isORBACProfileManager:eg,pinnerId:ep,reactionListCommentId:ex,viewParameter:ey}=e,{user:{id:ef,first_name:eb,id:ev,image_medium_url:ej,username:eP},id:ew,is_translatable:eC,comment_count:eA,helpful_count:eI,tags:eT=[]}=f,[eS,ez]=(0,o.useState)(!1),ek=eS&&f.translatedText||f.text,eL=!eC||""===f.translatedText,eE=!1,eR=0,eD=!1,eO=!!f.marked_helpful_by_me,eZ=w?[]:[f.user],eM="",eN=new Date;"aggregatedcomment"===f.type?(eE=f.highlighted_by_pin_owner,eR=f.reaction_counts[1],eD=f.reaction_by_me>0,n=f?.media?.sticker,eZ.push(...f.tagged_users),eM=w?ek??"":`${eP} ${ek??""}`,eN=new Date(f.created_at)):(eR=f.like_count,eD=f.liked_by_me,t=f.images[0]||{},eM=w?f.details:`${eP} ${f.details}`,eN=new Date(f.done_at));let eH=t?.["150x150"],eF=t?.originals,eU=n||eF,eB=(0,m.ZP)(),eW=(0,v.Z)(),{setIsMediaViewerOpen:eG,clientTrackingParams:eK,setIsCommentOverflowPopoverOpen:e$}=(0,I.x4)(),{logContextEvent:eV}=(0,F.v)(),{country:eq,countryFromIp:eJ,isBot:eQ}=(0,K.B)(),{showToast:eY}=(0,V.F9)(),eX=(0,l.I0)(),e0=(0,O.vs)(),e1=(0,o.useRef)(null),e6=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","EU"].includes(eq),{COUNTRY_CODES:e2}=Q.a0.india||{},e3=eJ&&e2&&e2.includes(eJ),e4=!S||e3||e6,e7="aggregatedcomment"===f.type&&1===f.comment_tag,e9=e7&&!w,e8=(0,j.Z)(),e5=(0,P.lJ)(eW,e8),{nativeEngagementsHiddenForUser:te}=(0,J.G)(),{aggregatedCommentsHiddenForUser:tt,translateAggregatedComment:tn,updateAggregatedComment:ti}=(0,M.nf)(),to=(0,r.Z)(),tl="userdiditdata"===f.type,ts=(0,W.Z)(),ta=eC&&!1,tr=T||w?eF:eH,td=(0,_.zs)(eP,eT,e0,w),tc={SHOW_TRANSLATION:eB.bt("Show translation", "Show translation", "comment.translateButton.showTranslation", undefined, true),TRANSLATING:eB.bt("Translating...", "Translating...", "comment.translateButton.translating", undefined, true),SHOW_ORIGINAL:eB.bt("Show original", "Show original", "comment.translateButton.showOriginal", undefined, true)},tm=(0,o.useRef)(tc.SHOW_TRANSLATION),[tu,th]=(0,a.Z)(),[t_,tg]=(0,o.useState)(!1),[tp,tx]=(0,o.useState)(!1),[ty,tf]=(0,o.useState)(!1),[tb,tv]=(0,o.useState)(!1),[tj,tP]=(0,o.useState)(!1),[tw,tC]=(0,o.useState)(!1),[tA,tI]=(0,o.useState)(!1),[tT,tS]=(0,o.useState)(_.A9.NONE),tz=e=>()=>{em?em(f):tx(e)};(0,o.useEffect)(()=>{ta&&eV({event_type:10416,view_type:3,view_parameter:ey,component:"pin"===el?13696:13697})},[eV,el,ta,ey]),(0,o.useEffect)(()=>{eA>0&&!eQ&&eX((0,$.U)("aggregatedcomment"===f.type?"AggregatedCommentReplyFeedResource":"DidItCommentsResource",{options:{isUnifiedComment:!0,objectId:ew,redux_normalize_feed:!0}}))},[f.type,ew]);let tk=el.toLowerCase()===q.o.aggregatedComment.toLowerCase()||el.toLowerCase()===q.n.didIt.toLowerCase(),tL=f.user.first_name||"",tE=async({contentMarkdown:e,force:t,tags:n})=>{let i,o;tv(!0);let l=f.id;if(tk&&(i=el.toLowerCase()===q.n.didIt,l=eo,o=f.id),l)try{await to({force:t,fromUnifiedComment:!0,objectType:tl||i?q.o.didIt:q.o.aggregatedComment,objectId:l,orbacSubjectId:e5,tags:n,text:e,replyToCommentId:o})}catch(t){let e=(0,U.Z)(t,"code");if([G.ky,G.LJ].includes(e??0)&&T)return tS(e===G.ky?_.A9.WARNING:_.A9.BLOCK),tv(!1),!1}return ee&&ee(void 0),tv(!1),!0},tR=async({contentMarkdown:e,force:t,tags:n})=>{tf(!0);try{tl?await eX((0,Y.IU)({id:f.id,details:e,pinId:es??"",image_signatures:"image_signatures"in f&&f.image_signatures?f.image_signatures:[]})):await ti({commentId:f.id,force:t,orbacSubjectId:e5,tags:n,text:e})}catch(e){if([G.ky,G.LJ].includes((0,U.Z)(e,"code")??0)&&T)return tS(e.code===G.ky?_.A9.WARNING:_.A9.BLOCK),tf(!1),!1}return tx(!1),tf(!1),!0},tD=()=>{T?(e$(!t_),tg(!t_)):N&&N(f,{showIndiaLawReporting:!!e3,showNetzDGReporting:!!e6})},tO=e=>()=>{e$(e),tg(e),tI(e),e||eV({component:14349,event_type:9408})},tZ=()=>{tS(_.A9.NONE)},tM=e=>{e?th():tu(),eG(!e),tP(!e)},tN=()=>{eS||f.translatedText||tn(f.id),eS||tm.current!==tc.SHOW_TRANSLATION?eS&&tm.current===tc.SHOW_ORIGINAL&&eV({event_type:10418,view_type:3,view_parameter:ey,component:"pin"===el?13696:13697}):eV({event_type:10417,view_type:3,view_parameter:ey,component:"pin"===el?13696:13697}),ez(!eS)};(0,o.useEffect)(()=>{eS&&eL&&(ez(!eS),eY(({hideToast:e})=>(0,u.jsx)(B.Z,{onHide:e,text:eB.bt("Error – couldn't translate", "Error - couldn't translate", "comment.couldNotTranslate.toast", undefined, true),type:"error"})))},[eS,eL]),eS?tm.current=f.translatedText?tc.SHOW_ORIGINAL:tc.TRANSLATING:tm.current=tc.SHOW_TRANSLATION;let tH=T?128:110,tF="aggregatedcomment"===f.type&&f.media?.sticker?.image_url&&(0,u.jsx)(i.xu,{height:tH,marginBottom:+!!T,marginTop:1,width:tH,children:f.media?.sticker?.image_url&&(0,u.jsx)(i.Ee,{alt:f.media?.sticker?.display_name??"",fit:"contain",naturalHeight:0,naturalWidth:0,src:f.media.sticker.image_url})});return(0,u.jsxs)(o.Fragment,{children:[(0,u.jsx)(i.xH,{accessibilityLabel:"Loading comment",show:ty}),!tp&&!ty&&(0,u.jsxs)(i.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(i.xu,{marginEnd:2,children:(0,u.jsx)(s.rU,{to:`/${eP}/`,children:(0,u.jsx)(c.Z,{isQuestion:e9,name:eb||eP||"",size:e_,src:ej??""})})}),(0,u.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"start",children:[(0,u.jsxs)(i.kC,{justifyContent:"between",children:[(0,u.jsx)(i.kC.Item,{minWidth:0,children:(0,u.jsxs)(i.kC,{dataTestId:"author-and-comment-container",direction:"column",children:[w&&(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:1,column:0},children:[(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!0,lineHeight:"14px",marginEnd:0,shouldShowFirstNameOnly:!0,size:"100",taggedUsers:[f.user],tags:(0,_.zs)(eP,[],e0),text:eP}),e7&&!ec&&(0,u.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:"14px"}},children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:eB.bt("asked a question 👀", "asked a question 👀", "comment.question.label", undefined, true)})}),ec&&(0,u.jsxs)(i.kC,{children:[(0,u.jsx)(i.xu,{alignItems:"center",display:"flex",marginEnd:1,children:(0,u.jsx)(i.JO,{accessibilityLabel:(0,_.yW)(eB),color:"recommendation",icon:"star",size:12})}),(0,u.jsx)(i.xv,{color:"recommendation",size:"100",weight:"bold",children:(0,_._q)(eB)})]}),(e7||ec)&&eN&&(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:"\xb7"}),eN&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",children:ts(eN,!0)})})]}),tl?(0,u.jsx)(D,{comment:f,commentTags:td,handlePhotoTap:()=>tM(tj),inCommentRepRedesignExp:w,isDesktop:T,previewPhoto:tr,taggedUsers:eZ}):(0,u.jsx)(R.Z,{isFirstTaggedUserAuthor:!w,lineHeight:w?"21px":void 0,marginBottom:w?"4px":void 0,shouldShowFirstNameOnly:!0,taggedUsers:eZ,tags:td,text:eM}),tF,ta&&(0,u.jsx)(i.xu,{marginBottom:2,marginTop:2,children:(0,u.jsx)(i.iP,{onTap:()=>tN(),children:(0,u.jsx)(i.xv,{color:"subtle",size:"300",weight:"bold",children:tm.current})})})]})}),b===ew&&(0,u.jsx)(i.xu,{alignSelf:"center",color:"primary",height:8,minWidth:8,rounding:"pill"})]}),eE&&(0,u.jsx)(i.xu,{marginBottom:w?1.5:3,marginTop:w?-.5:4,children:(0,u.jsx)(i.xv,{size:"100",children:(0,Z.nk)(eB.bt("Highlighted by @{{ closeupAttributionUsername }}", "Highlighted by @{{ closeupAttributionUsername }}", "comment.highlighted.label", undefined, true),{closeupAttributionUsername:y})})}),e4&&(0,u.jsxs)(i.xu,{alignItems:"center",display:"flex",height:T?25:"100%",justifyContent:"between",position:"relative",children:[(0,u.jsxs)(i.kC,{alignItems:"center",gap:{row:w?4:5,column:0},children:[!S&&!w&&(0,u.jsx)(i.xu,{"data-test-id":"comments-time-passed",children:(0,u.jsx)(i.xv,{color:"subtle",size:"200",children:ts(eN,!0)})}),!S&&(0,u.jsx)(i.xu,{"data-test-id":"comment-reply-button-container",children:(0,u.jsx)(i.iP,{onTap:()=>{ee&&ee(f,eo,el)},children:(0,u.jsx)(i.xv,{color:w?"default":"subtle",size:w?"100":"200",weight:"bold",children:eB.bt("Reply", "Reply", "comment.button.reply", undefined, true)})})}),!S&&(T||w?(0,u.jsx)(z,{commentId:ew,dismissReactionList:()=>{ed(void 0)},helpfulCount:eI,inCommentRepRedesignExp:w,isLovedByMe:eD,isMarkedHelpfulByMe:eO,isReactionListOpen:ex===ew,isTry:tl,lovedCount:eR,onReactionCountHover:()=>{ed(ew),eV({event_type:9906,component:"pin"===el?13696:13697,view_type:3,view_parameter:ey})},onToggleHelpful:e=>()=>{eO!==e&&eu(ew,!e,tl)()},onToggleLove:e=>()=>{eD!==e&&eh(ew,!e,tl)()}}):(0,u.jsxs)(i.xu,{alignItems:"center","data-test-id":"reactions-likeWithCountButton",display:"flex",children:[(0,u.jsx)(i.hU,{accessibilityLabel:eB.bt("Like", "Like", "comment.button.like", undefined, true),icon:"heart",iconColor:eD?"red":"gray",onClick:eh(ew,eD,tl),size:"xs"}),eR>0&&(0,u.jsx)(i.xu,{"data-test-id":"love-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eR})})]})),!("id"in eW&&eW.id===ev&&e7)&&(w?(0,u.jsx)(i.iP,{onTap:tD,children:(0,u.jsx)(i.JO,{accessibilityLabel:eB.bt("More", "More", "comment.button.more", undefined, true),color:e0?"light":"dark",icon:"ellipsis",size:12})}):(0,u.jsx)(i.xu,{ref:e1,"data-test-id":"comment-more-options",children:(0,u.jsx)(i.hU,{accessibilityLabel:eB.bt("More", "More", "comment.button.more", undefined, true),icon:"ellipsis",iconColor:"gray",onClick:tD,size:"xs"})}))]}),!S&&!eg&&!T&&!w&&(0,u.jsx)(i.xu,{marginStart:6,children:(0,u.jsx)(i.iP,{fullWidth:!1,onTap:eu(ew,eO,tl),children:(0,u.jsxs)(i.kC,{alignItems:"center",dataTestId:"helpful-reaction",gap:{row:1,column:0},height:"100%",children:[(0,u.jsx)(h,{color:"subtle",isMarkedHelpful:eO}),(0,u.jsx)(i.xv,{color:"subtle",size:"200",weight:"bold",children:eB.bt("Helpful", "Helpful", "comment.button.helpful", undefined, true)}),eI>0&&(0,u.jsx)(i.xu,{"data-test-id":"helpful-count-container",children:(0,u.jsx)(i.xv,{color:"subtle",size:"100",weight:"bold",children:eI})})]})})})]})]})]}),T&&(0,u.jsxs)(o.Fragment,{children:[tp&&!C&&(0,u.jsx)(i.xu,{marginTop:3,children:(0,u.jsx)(k.Z,{clientTrackingParams:eK,commentWarningModalState:tT,dismissCommentWarningModal:tZ,initialTags:f.tags,initialText:"aggregatedcomment"===f.type?f.text:f.details,isEditing:!0,objectType:q.o.aggregatedComment,onAddItem:tR,onCancelItem:tz(!1),postedPhoto:eU,showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ey})}),er===ew&&(0,u.jsx)(i.xu,{marginStart:12*!tk,marginTop:3,children:(0,u.jsx)(k.Z,{commentWarningModalState:tT,dismissCommentWarningModal:tZ,initialTags:tk?[{offset:0,object_id:ef,length:tL.length,tag_type:1}]:[],initialText:tk?`${tL} `:"",isReplying:!0,objectType:q.o.aggregatedComment,onAddItem:tE,onCancelItem:()=>{ee&&ee()},showCommentComposer:!0,statusType:"textInFlightNested",viewParameter:ey})})]}),(eA>0||tb)&&(0,u.jsx)(i.xu,{marginStart:w?10:12,marginTop:w?3:4,children:(0,u.jsx)(H,{aggregatedPinDataId:g,closeupAttributionId:x,closeupAttributionUsername:y,featuredCommentId:b,inCommentRepRedesignExp:w,inCommentsPopover:C,isDesktop:T,isLoading:tb,isORBACProfileManager:eg,isReadOnly:S,isVideo:E,openOverflowMenu:N,parentId:ew,parentType:f.type,pinId:es,pinnerId:ep,reactionListCommentId:ex,replyingToCommentId:er,shouldPreviewNewReply:p,showReactionListForComment:ed,storyPinDataId:ea,toggleEditComposer:em,toggleHelpful:eu,toggleLike:eh,toggleReplyComposer:ee,viewParameter:ey})}),T&&e4&&(0,u.jsx)(en,{aggregatedPinDataId:g,anchor:e1.current,closeupAttributionId:x,comment:f,dismiss:e=>{e$(!1),tg(!1),e||eV({component:14349,event_type:10128})},isOpen:t_,isReply:tk,onEdit:tz(!0),onShowBlockUserModal:tO(!0),parentId:eo,pinId:es,pinnerId:ep,showIndiaLawReporting:!!e3,showNetzDGReporting:e6}),tw&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(d.N,{children:(0,u.jsx)(ei,{aggregatedPinDataId:g,didItDataId:ew,onClose:e=>()=>{tC(!e)},pinId:es??"",username:eP,users:[f.user]})})}),tA&&(0,u.jsx)(A.Z,{children:(0,u.jsx)(et,{firstName:eb??"",onBlockUser:()=>{eX((0,X.Ge)({id:ef,orbacSubjectId:e5,blockSource:"comment",blockContext:ew,logContextEvent:eV})),tt(ef),te(ef),eV({event_type:101,component:13712,element:87,view_type:220,aux_data:{creator_id:eW.isAuth?eW.id:null}}),eV({component:14349,event_type:9407}),tI(!1),eY(({hideToast:e})=>(0,u.jsx)(B.Z,{onHide:e,text:(0,Z.nk)(eB.bt("You've blocked {{ username }}", "You've blocked {{ username }}", "comment.blockAuthor.toast", undefined, true),{username:eP}).join("")}))},onClearModal:tO(!1)})}),!!eF&&tj&&(0,u.jsx)(L.Z,{onDismiss:()=>tM(tj),photo:eF})]})}var el=n(351607);function es(e){let t,n,{aggregatedPinDataId:o,shouldPreviewNewReply:l,comments:s,commentsDisabled:a,commentsScrollContainerRef:r,featuredCommentId:d,gapSize:c=6,inCommentsPopover:h,inCommentRepRedesignExp:_,isDesktop:g,isLoading:p=!1,isReadOnly:x,openOverflowMenu:y,toggleReplyComposer:f,parentId:b,parentType:v,replyingToCommentId:j,showingCloseupCommentModule:P,toggleEditComposer:w,toggleHelpful:C,toggleLike:A,userAvatarSize:T,isORBACProfileManager:S,isVideo:z,storyPinDataId:k,pinId:L,closeupAttributionId:E,closeupAttributionUsername:R,pinnerId:D,showReactionListForComment:O,reactionListCommentId:Z,viewParameter:M}=e,N=(0,m.ZP)(),{closeupWithinMasonryEnabled:H}=(0,I.x4)(),F=!!P&&!1;return(h?t="12px":H&&(t="8px"),n=k?"story":z?"video":"pin",a)?(0,u.jsx)(i.xu,{alignSelf:"center","data-test-id":"comments-disabled-label",marginTop:H?2:void 0,width:"100%",children:(0,u.jsx)(i.xv,{align:g?"start":"center",color:"subtle",children:N.bt("Comments are turned off for this Pin", "Comments are turned off for this Pin", "commentThread.disabledState.message", undefined, true)})}):s.length>0?(0,u.jsxs)(i.xu,{ref:r,dangerouslySetInlineStyle:{__style:{gap:`${4*c}px 0`,scrollbarGutter:H?"stable":void 0,paddingTop:t}},"data-test-id":"aggregated-comment-list",direction:"column",display:"flex",maxHeight:H&&!h?722:"100%",overflow:H?"auto":void 0,width:"100%",children:[s.map((e,t)=>(0,u.jsx)(el.F,{componentType:"pin"===v?13696:13697,impressionAuxFields:{commentId:e.id,pinId:L,pinOwnerUserId:E,pinType:n,parentId:b,parentType:v,commentType:"aggregatedComment"},impressionType:"Comment",loggingId:e.id,slotIndex:t,viewType:g?3:98,children:({impressionTrackerRef:n})=>(0,u.jsx)(i.xu,{ref:n,"data-test-id":"commentThread-comment",tabIndex:0,children:(0,u.jsx)(eo,{aggregatedPinDataId:o,closeupAttributionId:E,closeupAttributionUsername:R,comment:e,featuredCommentId:d,inCommentRepRedesignExp:_,inCommentsPopover:h,isDesktop:g,isORBACProfileManager:S,isReadOnly:x,isVideo:z,openOverflowMenu:y,parentId:b,parentType:v,pinId:L,pinnerId:D,reactionListCommentId:Z,replyingToCommentId:j,shouldPreviewNewReply:l,showReactionListForComment:O,showTopCommentHeading:F&&0===t,storyPinDataId:k,toggleEditComposer:w,toggleHelpful:C,toggleLike:A,toggleReplyComposer:f,userAvatarSize:T,viewParameter:M})})},e.id)),p&&(0,u.jsx)(i.xH,{accessibilityLabel:N.bt("Comments loading", "Comments loading", " - ", undefined, true),show:p})]}):(0,u.jsx)(i.xu,{alignSelf:"center",width:"100%",children:(0,u.jsx)(i.xH,{accessibilityLabel:N.bt("Comments loading", "Comments loading", " - ", undefined, true),show:p})})}},624895:function(e,t,n){n.d(t,{Z:()=>r});var i=n(667294),o=n(223296),l=n(782259),s=n(785893);let a=(0,i.lazy)(()=>Promise.all([n.e("49124"),n.e("18876"),n.e("66979")]).then(n.bind(n,656379)));function r(e){return(0,s.jsx)(l.Z,{fallback:null,children:(0,s.jsx)(o.v,{children:(0,s.jsx)(a,{...e})})})}},54424:function(e,t,n){n.d(t,{Z:()=>r});var i=n(883119),o=n(762802),l=n(678213),s=n(525839),a=n(785893);function r({onDismiss:e,photo:t}){let n=(0,s.ZP)(),{height:r,url:d,width:c}=t,m=Math.min(r??936,936),u="100vh",h=n.bt("Close media viewer", "Close media viewer", "comments.photo.mediaViewer.close", undefined, true);return(0,a.jsxs)(i.mh,{zIndex:l.b7,children:[(0,a.jsx)(i.iP,{mouseCursor:"zoomOut",onTap:e,children:(0,a.jsxs)(i.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},"data-test-id":"comment-media-viewer",display:"flex",height:u,justifyContent:"center",left:!0,position:"fixed",right:!0,top:!0,width:"100%",children:[(0,a.jsx)(i.xu,{left:!0,padding:5,position:"absolute",top:!0,children:(0,a.jsx)(i.hU,{accessibilityLabel:h,icon:"cancel",iconColor:"white",onClick:e,padding:3,size:"lg"})}),(0,a.jsx)(i.xu,{dangerouslySetInlineStyle:{__style:{margin:"0 84px"}},height:u,maxHeight:m,width:c,children:d&&(0,a.jsx)(i.Ee,{alt:d??"",fit:"contain",naturalHeight:r??1,naturalWidth:c??1,src:d},d)})]})}),(0,a.jsx)(o.Z,{onClose:e})]})}},545961:function(e,t,n){n.d(t,{Vb:()=>_,ZP:()=>x,mu:()=>g});var i=n(667294),o=n(883119),l=n(767439),s=n(296691),a=n(436873),r=n(54424),d=n(525839),c=n(15667),m=n(647709),u=n(747859),h=n(785893);let _=150,g=346,p=e=>new Promise((t,n)=>{let i=new Image;i.onload=()=>{t({width:i.width,height:i.height})},i.onerror=n,i.src=e});function x({canEnlargePhoto:e,containerWidth:t,isSelectedPhoto:n,previewPhoto:x,removeSelectedPhoto:y}){let f=(0,d.ZP)(),b=(0,m.HG)(),{isRTL:v}=(0,c.B)(),{setIsMediaViewerOpen:j}=(0,u.x4)(),[P,w]=(0,l.Z)(),[C,A]=(0,i.useState)(!1),[I,T]=(0,i.useState)(!1),[S,z]=(0,i.useState)(null),[k,L]=(0,i.useState)(s.WU),E=(0,a.Z)(x)?x?.url:x?.image_url;(0,i.useEffect)(()=>{(async()=>{E&&!(0,a.Z)(x)&&z(await p(E))})()},[E,x]);let R=(0,a.Z)(x)?x?.width:S?.width,D=(0,a.Z)(x)?x?.height:S?.height,O=R??0,Z=D??0,M=E??"",N=Math.min((t||(b?g:312))/O,(b?_:110)/Z,1),H=f.bt("Remove photo", "Remove photo", "photoCommentPreview.removePhoto", undefined, true),F=f.bt("Photo", "Photo", "photoCommentPreview.previewPhoto", undefined, true),U=e=>{e?w():P(),j(!e),A(!e)};return(0,h.jsxs)(o.xu,{height:N*Z,marginTop:3*!!n,position:"relative",width:N*O,children:[(0,h.jsx)(o.iP,{disabled:!e,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onTap:()=>U(C),children:(0,h.jsx)(o.zd,{rounding:2,children:M&&(0,h.jsx)(o.Ee,{alt:F,color:k,naturalHeight:Z,naturalWidth:O,onLoad:()=>{L(s.o),n&&URL.revokeObjectURL(M)},src:M,children:e&&(0,h.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{cursor:"zoom-in",backgroundColor:`rgba(17, 17, 17, ${.4*!!I})`}},height:"100%",width:"100%"})},F)})}),n&&(0,h.jsx)(o.xu,{alignItems:"center",display:"flex",height:24,justifyContent:"center",left:v,marginEnd:-3,marginTop:-3,position:"absolute",right:!v,top:!0,width:24,children:(0,h.jsx)(o.hU,{accessibilityLabel:H,bgColor:"lightGray",icon:"cancel",onClick:y,size:"xs"})}),C&&(0,h.jsx)(r.Z,{onDismiss:()=>U(C),photo:x})]})}},162321:function(e,t,n){n.d(t,{Z:()=>s});var i=n(667294),o=n(883119),l=n(785893);let s=({inCommentFeedPreview:e,isFirstTaggedUserAuthor:t,lineHeight:n,marginBottom:s,marginEnd:a,shouldShowFirstNameOnly:r,size:d,tags:c,taggedUsers:m,text:u})=>{let h=(0,i.useRef)(null),_=(e,t)=>(0,l.jsx)(o.xv,{inline:!0,overflow:"normal",size:d,children:(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n,overflowWrap:"anywhere",display:"inline"}},"data-test-id":"text-container",children:e})},t),g=(n,i,s,a)=>{let c=r||0===s&&t?m[s].first_name||m[s].username[0]:i;return(0,l.jsx)(o.xv,{color:n,inline:!0,overflow:"normal",size:d,weight:"bold",children:e?c:(0,l.jsx)(o.rU,{display:"inlineBlock",href:`/${m[s].username}`,underline:"hover",children:c})},a)};return(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap",wordWrap:"break-word",marginBottom:s}},children:(()=>{if(!c.length||!m||c.length!==m.length)return _(u,"1");let t=0,i=[];return c.forEach((e,n)=>{let o=u.substring(t,e.offset);t=e.offset+e.length;let l=u.substring(e.offset,t);i=i.concat(_(o,`${n}a`)).concat(g(e.color,l,n,`${n}b`))}),i=i.concat(_(u.substring(t),"2")),(0,l.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{lineHeight:n}},display:r?"flex":void 0,marginEnd:a??3,position:"relative",children:(0,l.jsx)(o.xv,{ref:h,inline:!0,lineClamp:e?1:void 0,size:d,children:i})})})()})}},296691:function(e,t,n){n.d(t,{A9:()=>p,F1:()=>A,Ff:()=>C,G5:()=>I,G_:()=>w,Gu:()=>P,LH:()=>r,Rv:()=>u,TJ:()=>_,Ty:()=>s,WU:()=>f,XU:()=>m,_q:()=>k,i$:()=>b,iB:()=>a,je:()=>d,mi:()=>T,o:()=>y,pW:()=>g,qJ:()=>L,ql:()=>x,sp:()=>S,uC:()=>c,xA:()=>h,yQ:()=>z,yW:()=>j,zs:()=>v});var i=n(883119),o=n(473728),l=n(25837);let s=new i.H3([l.NW]),a=48,r=56,d="sm",c=500,m=1,u=Object.freeze({TOP:0,REPLY_TO_TRIED:1,REPLY_TO_AGGREGATED:2}),h=Object.freeze({PHOTO:0,STICKER:1,PIN:2}),_="comment_featured_ids",g="did_it_featured_ids",p={NONE:"none",WARNING:"warning",BLOCK:"block"},x="https://s.pinimg.com/images/user/default_75.png",y="transparent",f="#efefef",b=(e,t)=>e?(0,o.Z)(t.nbt(["{{ count }} comment", "{{ count }} comments"], e, "closeup.commentThread.heading.commentCount", true),{count:e.toString()}):t.bt("No comments yet", "No comments yet", "closeup.commentThread.heading.noComments", undefined, true),v=(e,t,n,i)=>{let o=t.map(t=>({...t,offset:(t.offset||0)+(i?0:e.length+1),color:"shopping"}));return i?o:[{offset:0,length:e.length,color:n?"light":"dark"},...o]},j=e=>e.bt("Insight heading icon", "Insight heading icon", "closeupCommentModuleHeading.icon", undefined, true),P=e=>e.bt("No comments yet", "No comments yet", "emptyCommentThread.noComments.heading", undefined, true),w=e=>e.bt("Post", "Post", "commentComposer.button.post", undefined, true),C=e=>e.bt("posted a photo", "posted a photo", "comment.preview.text.photo", undefined, true),A=e=>e.bt("posted a sticker", "posted a sticker", "comment.preview.text.sticker", undefined, true),I=e=>e.bt("Select an emoji", "Select an emoji", "emojitray.button.accessibilityLabel", undefined, true),T=e=>e.bt("Select a photo", "Select a photo", "photoModal.button.accessibilityLabel", undefined, true),S=e=>e.bt("Select a sticker", "Select a sticker", "stickerTray.button.accessibilityLabel", undefined, true),z=e=>e.bt("Text editor", "Text editor", "EditorWithMentions.container", undefined, true),k=e=>e.bt("Top comment", "Top Comment", "closeupCommentModuleHeading.heading.topComment", undefined, true),L=e=>[I(e),T(e),w(e),S(e),z(e)]},436873:function(e,t,n){n.d(t,{Z:()=>i});let i=e=>e?.url!==void 0},934603:function(e,t,n){n.d(t,{B:()=>P,Z:()=>A});var i,o=n(667294),l=n(581722);n(167912);var s=n(616550),a=n(883119),r=n(780734),d=n(779548),c=n(886981),m=n(647709),u=n(341742),h=n(535701),_=n(448505),g=n(7872),p=n(105433),x=n(542092),y=n(716751),f=n(611134),b=n(32082),v=n(793698),j=n(785893);let P=({aggregatedPinDataId:e,featuredCommentIds:t,featuredDidItIds:n,isDesktop:i,isReversed:o=!1,noCache:l=!1,orbacSubjectId:s=""})=>({name:"UnifiedCommentsResource",options:{aggregated_pin_id:e,comment_featured_ids:t,did_it_featured_ids:n,page_size:i?10:25,redux_normalize_feed:!0,is_reversed:o,...s?{orbac_subject_id:s}:{}},noCache:l}),w=void 0!==i?i:i=n(316387),C=({aggregatedPinDataId:e,inCommentRepRedesignExp:t,shouldPreviewNewReply:n,closeupAttributionId:i,closeupAttributionUsername:d,commentsDisabled:w,hasComments:C,isReadOnly:A,pinId:I,isVideo:T,pinnerId:S,scrollContainer:z,setIsComposingNewComment:k=()=>{},showingCloseupCommentModule:L,storyPinDataId:E,viewParameter:R,toggleComposerForReply:D,openMwebOverflowMenu:O})=>{let{comment_id:Z}=(0,s.UO)(),M=(0,l.I0)(),N=(0,m.HG)(),H=(0,h.Z)(),F=(0,o.useRef)(C),U=(0,_.Z)(),B=(0,g.lJ)(H,U),W=(0,c.Z)(F.current&&e?P({aggregatedPinDataId:e,featuredCommentIds:Z?[Z]:[],isDesktop:N}):null),{removeUnauthCommentPinId:G,unauthCommentPinId:K}=(0,y.C)(),$=(0,p.lV)(),{toggleAggregatedCommentHelpful:V,toggleAggregatedCommentLike:q}=(0,p.nf)(),J=(0,v.kW)(),Q=(0,l.v9)(t=>(0,b.Z)(t,{aggregatedPinDataId:e,aggregatedComments:$,users:J})),[Y,X]=(0,o.useState)(void 0),ee=()=>{k(!0)};return(0,u.Z)(()=>{!N&&H.isAuth&&K&&I&&K===I&&(ee(),G())}),(0,o.useEffect)(()=>{let e=()=>{let t=!!z&&z.scrollTop+z.clientHeight+10>=z.scrollHeight;W&&!W.isFetching&&(W.isAtEnd?z?.removeEventListener("scroll",e):t&&W.fetchMore())};return z?.addEventListener("scroll",e),()=>{z?.removeEventListener("scroll",e)}},[W,z]),(0,j.jsx)(o.Fragment,{children:(0,j.jsx)(a.xu,{display:"flex",height:t&&0===Q.length?"100%":void 0,marginTop:N?6:2*!!t,width:"100%",children:(0,j.jsx)(r.Z,{aggregatedPinDataId:e,closeupAttributionId:i,closeupAttributionUsername:d,comments:Q,commentsDisabled:w,inCommentRepRedesignExp:t,isDesktop:N,isReadOnly:A,isVideo:T,openOverflowMenu:O,parentId:e??"",parentType:x.o.pin,pinId:I,pinnerId:S,reactionListCommentId:Y,shouldPreviewNewReply:n,showingCloseupCommentModule:L,showReactionListForComment:X,storyPinDataId:E,toggleHelpful:(e,t,n)=>()=>{n?M((0,f.YH)({didItDataId:e,isMarkedHelpfulByMe:t,orbacSubjectId:B})):V({aggregatedCommentId:e,isMarkedHelpfulByMe:t,orbacSubjectId:B})},toggleLike:(e,t,n)=>()=>{n?M((0,f.wH)({didItDataId:e,isLikedByMe:t,orbacSubjectId:B})):q({aggregatedCommentId:e,isLikedByMe:t,orbacSubjectId:B})},toggleReplyComposer:D,userAvatarSize:"sm",viewParameter:R})})})};function A({pinKey:e,...t}){let n=(0,d.Z)(w,e),i=(n?.aggregatedPinData?.commentCount||0)+(n?.aggregatedPinData?.didItData?.imagesCount||0);return(0,j.jsx)(C,{aggregatedPinDataId:n?.aggregatedPinData?.entityId,closeupAttributionId:n?.closeupAttribution?.entityId,closeupAttributionUsername:n?.closeupAttribution?.username,commentsDisabled:n?.commentsDisabled,disablePhotoCommentSelection:!!n?.doneByMe,hasComments:i>0&&!n?.commentsDisabled,isVideo:!!n?.videos?.videoList,pinId:n?.entityId,pinnerId:n?.pinner?.entityId,storyPinDataId:n?.storyPinData?.entityId,...t})}},716751:function(e,t,n){n.d(t,{C:()=>a,p:()=>r});var i=n(667294),o=n(729434),l=n(785893);let{Provider:s,useHook:a}=(0,o.Z)("Session");function r({children:e}){let[t,n]=(0,i.useState)(void 0),o=(0,i.useCallback)(()=>n(void 0),[]),a=(0,i.useMemo)(()=>({unauthCommentPinId:t,setUnauthCommentPinId:n,removeUnauthCommentPinId:o}),[t,o]);return(0,l.jsx)(s,{value:a,children:e})}},32082:function(e,t,n){n.d(t,{Z:()=>s});var i=n(442279),o=n(696323);let l={},s=(0,i.createSelector)((e,{aggregatedComments:t})=>t,({feeds:e},{aggregatedPinDataId:t})=>e[`${o.Z.UNIFIED_COMMENTS}:${t||""}`],({didItData:e})=>e,(e,{users:t})=>t??l,(e,t,n,i)=>{let o=new Set;return t?.map(({id:t,type:s})=>{if(o.has(t))return;o.add(t);let a="aggregatedcomment"===s.toLowerCase()?e[t]:n[t];if(!a)return;let r="user"in a&&("string"==typeof a.user?i[a.user]??l:a.user??l);return{...a,user:r??l}}).filter(e=>void 0!==e)||[]})},333651:function(e){e.exports="https://s.pinimg.com/webapp/commentHelpful-99007872.svg"},773655:function(e){e.exports="https://s.pinimg.com/webapp/commentLoved-7942dc4f.svg"}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31262.en_GB-94287f939b31b421.mjs.map